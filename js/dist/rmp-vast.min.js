/**
 * @license Copyright (c) 2017 Radiant Media Player | https://www.radiantmediaplayer.com
 * rmp-vast 0.1.0
 * GitHub: https://github.com/radiantmediaplayer/rmp-vast
 * MIT License: https://www.radiantmedialyzer.net/rmp-vast/mit-license.html
 */
!function e(t,i,n){function s(a,l){if(!i[a]){if(!t[a]){var o="function"==typeof require&&require;if(!l&&o)return o(a,!0);if(r)return r(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return s(i?i:e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.API=void 0;var n=e("../fw/fw"),s=e("../fw/fw-vast"),r=e("../fw/env"),a=e("../players/vast-player"),l=e("../players/content-player"),o={};o.getAdPaused=function(){return this.adOnStage&&this.adIsLinear?this.vastPlayerPaused:null},o.play=function(){return this.vastPlayerInitialized?void(this.adOnStage&&this.adIsLinear?a.VASTPLAYER.play.call(this):l.CONTENTPLAYER.play.call(this)):void this.initialize()},o.pause=function(){this.adOnStage&&this.adIsLinear?a.VASTPLAYER.pause.call(this):l.CONTENTPLAYER.pause.call(this)},o.setVolume=function(e){if("number"==typeof e){var t=0;t=0>e?0:e>1?1:e,this.adOnStage?(this.adIsLinear&&a.VASTPLAYER.setVolume.call(this,e),l.CONTENTPLAYER.setVolume.call(this,e)):l.CONTENTPLAYER.setVolume.call(this,e)}},o.getVolume=function(){return this.adOnStage&&this.adIsLinear?a.VASTPLAYER.getVolume.call(this):l.CONTENTPLAYER.getVolume.call(this)},o.setMute=function(e){"boolean"==typeof e&&(this.adOnStage?(this.adIsLinear&&a.VASTPLAYER.setMute.call(this,e),l.CONTENTPLAYER.setMute.call(this,e)):l.CONTENTPLAYER.setMute.call(this,e))},o.getMute=function(){return this.adOnStage&&this.adIsLinear?a.VASTPLAYER.getMute.call(this):l.CONTENTPLAYER.getMute.call(this)},o.getFullscreen=function(){return this.isInFullscreen},o.setFullscreen=function(e){"boolean"==typeof e&&(this.isInFullscreen&&!e?r.ENV.exitFullscreen(this.adOnStage&&this.adIsLinear?this.vastPlayer:this.contentPlayer):!this.isInFullscreen&&e&&(this.adOnStage&&this.adIsLinear?r.ENV.requestFullscreen(this.container,this.vastPlayer):r.ENV.requestFullscreen(this.container,this.contentPlayer)))},o.stopAds=function(){this.adOnStage&&(this.readyForReset=!0,a.VASTPLAYER.resumeContent.call(this))},o.getAdTagUrl=function(){return this.adTagUrl},o.getAdMediaUrl=function(){return this.adOnStage?this.adIsLinear?this.adMediaUrl:this.nonLinearCreativeUrl:null},o.getAdLinear=function(){return this.adIsLinear},o.getAdSystem=function(){return this.adSystem},o.getAdContentType=function(){return this.adOnStage?this.adIsLinear?this.adContentType:this.nonLinearContentType:null},o.getAdTitle=function(){return this.adTitle},o.getAdDescription=function(){return this.adDescription},o.getAdDuration=function(){return this.adOnStage&&this.adIsLinear?a.VASTPLAYER.getDuration.call(this):null},o.getAdCurrentTime=function(){return this.adOnStage&&this.adIsLinear?a.VASTPLAYER.getCurrentTime.call(this):null},o.getAdOnStage=function(){return this.adOnStage},o.getAdMediaWidth=function(){return this.adOnStage?this.adIsLinear?this.adMediaWidth:this.nonLinearCreativeWidth:null},o.getAdMediaHeight=function(){return this.adOnStage?this.adIsLinear?this.adMediaHeight:this.nonLinearCreativeHeight:null},o.getClickThroughUrl=function(){return this.clickThroughUrl},o.createEvent=function(e){"string"==typeof e&&""!==e&&this.container&&n.FW.createStdEvent(e,this.container)},o.getAdErrorMessage=function(){return this.vastErrorMessage},o.getAdVastErrorCode=function(){return this.vastErrorCode},o.getEnv=function(){return r.ENV},o.getFW=function(){return n.FW},o.getFWVAST=function(){return s.FWVAST},o.getVastPlayer=function(){return this.vastPlayer},o.getContentPlayer=function(){return this.contentPlayer},o.getIsUsingContentPlayerForAds=function(){return this.useContentPlayerForAds},o.initialize=function(){this.vastPlayerInitialized||(a.VASTPLAYER.init.call(this),n.FW.playPromise(this.contentPlayer),this.contentPlayer.pause())},i.API=o},{"../fw/env":6,"../fw/fw":8,"../fw/fw-vast":7,"../players/content-player":10,"../players/vast-player":11}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ICONS=void 0;var n=e("../fw/fw"),s=e("../fw/fw-vast"),r=e("../tracking/ping"),a={};a.destroy=function(){for(var e=this.adContainer.getElementsByClassName("rmp-ad-container-icons"),t=0,i=e.length;i>t;t++)this.adContainer.removeChild(e[t])};var l=function(e){for(var t=0,i=this.icons.length;i>t;t++)if(this.icons[t].program===e)return!0;return!1};a.parse=function(e){for(var t=e[0].getElementsByTagName("Icon"),i=0,n=t.length;n>i;i++){var r=t[i],a=r.getAttribute("program");if(null!==a&&""!==a&&!l.call(this,a)){var o=r.getAttribute("width");if(!(null===o||""===o||parseInt(o)<1)){var h=r.getAttribute("height");if(!(null===h||""===h||parseInt(h)<1)){var c=r.getAttribute("xPosition");if(null!==c&&""!==c){var d=r.getAttribute("yPosition");if(null!==d&&""!==d){var u=r.getElementsByTagName("StaticResource");if(1===u.length){var p=u[0].getAttribute("creativeType"),v=/^image\/(gif|jpeg|jpg|png)$/i;if(null!==p&&""!==p&&v.test(p)){var g=s.FWVAST.getNodeValue(u[0],!0);if(null!==g){var f={program:a,width:o,height:h,xPosition:c,yPosition:d,staticResourceUrl:g},y=r.getElementsByTagName("IconViewTracking"),m=s.FWVAST.getNodeValue(y[0],!0);null!==m&&(f.iconViewTrackingUrl=m);var E=r.getElementsByTagName("IconClicks");if(1===E.length){var P=E[0].getElementsByTagName("IconClickThrough"),T=s.FWVAST.getNodeValue(P[0],!0);if(null!==T){f.iconClickThroughUrl=T;var A=E[0].getElementsByTagName("IconClickTracking");if(A.length>0){f.iconClickTrackingUrl=[];for(var S=0,C=A.length;C>S;S++){var k=s.FWVAST.getNodeValue(A[S],!0);null!==k&&f.iconClickTrackingUrl.push(k)}}}}this.icons.push(f)}}}}}}}}}};var o=function(e){var t=this;try{if(window.open(this.icons[e].iconClickThroughUrl,"_blank "),"undefined"!=typeof this.icons[e].iconClickTrackingUrl){var i=this.icons[e].iconClickTrackingUrl;i.length>0&&i.forEach(function(e){r.PING.tracking.call(t,e,null)})}}catch(e){n.FW.trace(e)}},h=function(e){r.PING.tracking.call(this,this.icons[e].iconViewTrackingUrl,null)},c=function(){this.vastPlayer.removeEventListener("playing",this.onPlayingAppendIcons);for(var e=0,t=this.icons.length;t>e;e++){var i=document.createElement("img");i.className="rmp-ad-container-icons",i.style.width=parseInt(this.icons[e].width)+"px",i.style.height=parseInt(this.icons[e].height)+"px";var n=this.icons[e].xPosition;"left"===n?i.style.left="0px":"right"===n?i.style.right="0px":i.style.left=parseInt(n)>=0?n+"px":"0px";var s=this.icons[e].yPosition;"top"===s?i.style.top="0px":"bottom"===n?i.style.bottom="0px":i.style.top=parseInt(s)>=0?s+"px":"0px","undefined"!=typeof this.icons[e].iconViewTrackingUrl&&i.addEventListener("load",h.bind(this,e)),"undefined"!=typeof this.icons[e].iconClickThroughUrl&&i.addEventListener("click",o.bind(this,e)),i.src=this.icons[e].staticResourceUrl,this.adContainer.appendChild(i)}};a.append=function(){this.onPlayingAppendIcons=c.bind(this),this.vastPlayer.addEventListener("playing",this.onPlayingAppendIcons)},i.ICONS=a},{"../fw/fw":8,"../fw/fw-vast":7,"../tracking/ping":12}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.LINEAR=void 0;var n=e("../fw/fw"),s=e("../fw/fw-vast"),r=e("../fw/env"),a=e("../tracking/ping"),l=e("../players/content-player"),o=e("../players/vast-player"),h=e("../api/api"),c=e("./skip"),d=e("./icons"),u=e("../utils/vast-errors"),p={},v=function(){this.vastPlayer.removeEventListener("durationchange",this.onDurationChange),this.vastPlayerDuration=o.VASTPLAYER.getDuration.call(this),h.API.createEvent.call(this,"addurationchange")},g=function(){this.vastPlayer.removeEventListener("loadedmetadata",this.onLoadedmetadataPlay),h.API.createEvent.call(this,"adloaded"),l.CONTENTPLAYER.pause.call(this),n.FW.show(this.adContainer),n.FW.show(this.vastPlayer),this.adOnStage=!0,o.VASTPLAYER.play.call(this)},f=function(){this.vastPlayer.removeEventListener("ended",this.onEndedResumeContent),o.VASTPLAYER.resumeContent.call(this)},y=function(e){try{e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),window.open(this.clickThroughUrl,"_blank"),h.API.createEvent.call(this,"adclick"),s.FWVAST.dispatchPingEvent.call(this,"clickthrough")}catch(e){n.FW.trace(e)}},m=function(){a.PING.error.call(this,405),u.VASTERRORS.process.call(this,405)},E=function(){this.clickUIOnMobile=document.createElement("div"),this.clickUIOnMobile.className="rmp-ad-click-ui-mobile",this.clickUIOnMobile.textContent=this.params.textForClickUIOnMobile,this.clickUIOnMobile.addEventListener("touchend",this.onClickThrough),this.adContainer.appendChild(this.clickUIOnMobile)};p.update=function(e,t){if(this.onDurationChange=v.bind(this),this.vastPlayer.addEventListener("durationchange",this.onDurationChange),this.onLoadedmetadataPlay=g.bind(this),this.vastPlayer.addEventListener("loadedmetadata",this.onLoadedmetadataPlay),this.onEndedResumeContent=f.bind(this),this.vastPlayer.addEventListener("ended",this.onEndedResumeContent),!this.useContentPlayerForAds){var i=this.adContainer.getElementsByTagName("source")[0];i?this.vastPlayerSource=i:(this.vastPlayerSource=document.createElement("source"),this.onPlaybackError=m.bind(this),this.vastPlayerSource.addEventListener("error",this.onPlaybackError),this.vastPlayer.appendChild(this.vastPlayerSource))}var s=this.adContainer.getElementsByClassName("rmp-ad-vast-video-player")[0];this.useContentPlayerForAds||s||this.adContainer.appendChild(this.vastPlayer),n.FW.hasClass(this.container,"rmp-fullscreen-on")&&(this.isInFullscreen=!0),this.useContentPlayerForAds?this.contentPlayer.src=e:(this.vastPlayerSource.type=t,this.vastPlayerSource.src=e),this.vastPlayer.load(),this.clickThroughUrl&&(this.onClickThrough=y.bind(this),r.ENV.isMobile?E.call(this):this.vastPlayer.addEventListener("click",this.onClickThrough)),this.isSkippableAd&&c.SKIP.append.call(this)},p.parse=function(e){this.adIsLinear=!0;var t=e[0].getElementsByTagName("Duration");if(1!==t.length)return a.PING.error.call(this,101,this.inlineOrWrapperErrorTags),void u.VASTERRORS.process.call(this,101);var i=e[0].getElementsByTagName("MediaFiles");if(1!==i.length)return a.PING.error.call(this,101,this.inlineOrWrapperErrorTags),void u.VASTERRORS.process.call(this,101);var l=i[0].getElementsByTagName("MediaFile");if(l.length<1)return a.PING.error.call(this,101,this.inlineOrWrapperErrorTags),void u.VASTERRORS.process.call(this,101);for(var h=[],c=[],p=0,v=l.length;v>p;p++){h[p]={};var g=l[p],f=s.FWVAST.getNodeValue(g,!0);if(null!==f){var y=g.getAttribute("delivery");if("progressive"===y||"streaming"===y){var m=g.getAttribute("type");if(null!==m&&""!==m){var E=g.getAttribute("width");if(null!==E&&""!==E){var P=g.getAttribute("height");null!==P&&""!==P?(h[p].url=f,h[p].delivery=y,h[p].type=m,h[p].width=parseInt(E),h[p].height=parseInt(P)):c.push(p)}else c.push(p)}else c.push(p)}else c.push(p)}else c.push(p)}n.FW.removeIndexFromArray(h,c);for(var T=[],A=[],S=0,C=h.length;C>S;S++)if("streaming"===h[S].delivery){if(("application/vnd.apple.mpegurl"===h[S].type||"x-mpegurl"===h[S].type)&&r.ENV.okHls)return void o.VASTPLAYER.append.call(this,h[S].url,h[S].type)}else"video/mp4"===h[S].type&&r.ENV.okMp4?T.push(h[S]):"video/webm"===h[S].type&&r.ENV.okWebM&&A.push(h[S]);var k=[];if(r.ENV.okMp4&&T.length>0?(T.sort(function(e,t){return e.width-t.width}),k=T):r.ENV.okWebM&&A.length>0&&(A.sort(function(e,t){return e.width-t.width}),k=A),0===k.length)return a.PING.error.call(this,403,this.inlineOrWrapperErrorTags),void u.VASTERRORS.process.call(this,403);var N=e[0].getElementsByTagName("Icons");N.length>0&&d.ICONS.parse.call(this,N);for(var w={},L=n.FW.getWidth(this.container),R=0,F=k.length;F>R&&(w=k[R],!(w.width>=L));R++);this.adMediaUrl=w.url,this.adMediaHeight=w.height,this.adMediaWidth=w.width,this.adContentType=w.type,o.VASTPLAYER.append.call(this,w.url,w.type)},i.LINEAR=p},{"../api/api":1,"../fw/env":6,"../fw/fw":8,"../fw/fw-vast":7,"../players/content-player":10,"../players/vast-player":11,"../tracking/ping":12,"../utils/vast-errors":15,"./icons":2,"./skip":5}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NONLINEAR=void 0;var n=e("../fw/fw"),s=e("../fw/fw-vast"),r=e("../tracking/ping"),a=e("../players/vast-player"),l=e("../players/content-player"),o=e("../api/api"),h=e("../utils/vast-errors"),c={},d=function(){r.PING.error.call(this,502),h.VASTERRORS.process.call(this,502)},u=function(){this.adOnStage=!0,this.adMediaUrl=this.nonLinearCreativeUrl,o.API.createEvent.call(this,"adloaded"),o.API.createEvent.call(this,"adimpression"),o.API.createEvent.call(this,"adstarted"),s.FWVAST.dispatchPingEvent.call(this,["impression","creativeView","start"])},p=function(){try{window.open(this.clickThroughUrl,"_blank"),o.API.createEvent.call(this,"adclick"),s.FWVAST.dispatchPingEvent.call(this,"clickthrough")}catch(e){n.FW.trace(e)}};c.update=function(){this.nonLinearCreative=document.createElement("img"),this.nonLinearCreative.className="rmp-ad-non-linear-creative",this.nonLinearCreative.style.width=this.nonLinearCreativeWidth+"px",this.nonLinearCreative.style.height=this.nonLinearCreativeHeight+"px",this.onNonLinearLoadError=d.bind(this),this.nonLinearCreative.addEventListener("error",this.onNonLinearLoadError),this.onNonLinearLoadSuccess=u.bind(this),this.nonLinearCreative.addEventListener("load",this.onNonLinearLoadSuccess),this.clickThroughUrl&&(this.onNonLinearClickThrough=p.bind(this),this.nonLinearCreative.addEventListener("click",this.onNonLinearClickThrough)),this.nonLinearCreative.src=this.nonLinearCreativeUrl,this.adContainer.appendChild(this.nonLinearCreative),n.FW.show(this.adContainer),l.CONTENTPLAYER.play.call(this)},c.parse=function(e){this.adIsLinear=!1;var t=e[0].getElementsByTagName("NonLinear");if(!(t.length<1)){for(var i=void 0,l="",o=0,c=t.length;c>o;o++){i=t[o];var d=i.getAttribute("width");if(null!==d&&""!==d){var u=i.getAttribute("height");if(null!==u&&""!==u){if(!(parseInt(u)<=0||parseInt(d)<=0)){var p=i.getElementsByTagName("StaticResource");if(!(p.length<1)){for(var v=void 0,g=0,f=p.length;f>g;g++){var y=p[g];if(v=y.getAttribute("creativeType"),null!==v&&""!==v){var m=/^image\/(png|jpeg|jpg|gif)$/i;if(m.test(v)){var E=n.FW.getWidth(this.container);if(!(parseInt(d)>E)){l=s.FWVAST.getNodeValue(y,!0);break}}}}if(""!==l){this.nonLinearCreativeUrl=l,this.nonLinearCreativeHeight=u,this.nonLinearCreativeWidth=d,this.nonLinearContentType=v;break}}}}else r.PING.error.call(this,101,this.inlineOrWrapperErrorTags),h.VASTERRORS.process.call(this,101)}else r.PING.error.call(this,101,this.inlineOrWrapperErrorTags),h.VASTERRORS.process.call(this,101)}if(!this.nonLinearCreativeUrl||!i)return r.PING.error.call(this,503,this.inlineOrWrapperErrorTags),void h.VASTERRORS.process.call(this,503);var P=i.getElementsByTagName("NonLinearClickThrough");if(1===P.length){this.clickThroughUrl=s.FWVAST.getNodeValue(P[0],!0);var T=t[0].getElementsByTagName("NonLinearClickTracking");if(T.length>0)for(var A=0,S=T.length;S>A;A++){var C=s.FWVAST.getNodeValue(T[A],!0);null!==C&&this.trackingTags.push({event:"clickthrough",url:C})}}a.VASTPLAYER.append.call(this)}},i.NONLINEAR=c},{"../api/api":1,"../fw/fw":8,"../fw/fw-vast":7,"../players/content-player":10,"../players/vast-player":11,"../tracking/ping":12,"../utils/vast-errors":15}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SKIP=void 0;var n=e("../fw/fw"),s=e("../fw/fw-vast"),r=e("../players/vast-player"),a=e("../api/api"),l={},o=function(){this.skipWaiting.style.display="none",this.skipMessage.style.display="block",this.skipIcon.style.display="block"},h=function(e){Math.round(e)>0&&(this.skipWaiting.textContent=this.params.skipWaitingMessage+" "+Math.round(e)+"s")},c=function(){if("none"===this.skipButton.style.display&&(this.skipButton.style.display="block"),this.vastPlayerCurrentTime=this.vastPlayer.currentTime,n.FW.isNumber(this.vastPlayerCurrentTime)&&this.vastPlayerCurrentTime>0){var e=s.FWVAST.convertOffsetToSeconds(this.skipoffset,this.vastPlayerDuration);this.vastPlayerCurrentTime>=e?(this.vastPlayer.removeEventListener("timeupdate",this.onTimeupdateCheckSkip),o.call(this),this.skippableAdCanBeSkipped=!0,a.API.createEvent.call(this,"adskippablestatechanged")):e-this.vastPlayerCurrentTime>0&&h.call(this,e-this.vastPlayerCurrentTime)}},d=function(){this.skippableAdCanBeSkipped&&(a.API.createEvent.call(this,"adskipped"),s.FWVAST.dispatchPingEvent.call(this,"skip"),r.VASTPLAYER.resumeContent.call(this))};l.append=function(){this.skipButton=document.createElement("div"),this.skipButton.className="rmp-ad-container-skip",this.skipButton.style.display="none",this.skipWaiting=document.createElement("div"),this.skipWaiting.className="rmp-ad-container-skip-waiting",h.call(this,this.skipoffset),this.skipWaiting.style.display="block",this.skipMessage=document.createElement("div"),this.skipMessage.className="rmp-ad-container-skip-message",this.skipMessage.textContent=this.params.skipMessage,this.skipMessage.style.display="none",this.skipIcon=document.createElement("div"),this.skipIcon.className="rmp-ad-container-skip-icon",this.skipIcon.style.display="none",this.onClickSkip=d.bind(this),this.skipButton.addEventListener("click",this.onClickSkip),this.skipButton.appendChild(this.skipWaiting),this.skipButton.appendChild(this.skipMessage),this.skipButton.appendChild(this.skipIcon),this.adContainer.appendChild(this.skipButton),this.onTimeupdateCheckSkip=c.bind(this),this.vastPlayer.addEventListener("timeupdate",this.onTimeupdateCheckSkip)},i.SKIP=l},{"../api/api":1,"../fw/fw":8,"../fw/fw-vast":7,"../players/vast-player":11}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={};n.testVideo=document.createElement("video");var s=function(e,t){if(null===t)return-1;var i=t.match(e);return Array.isArray(i)&&"undefined"!=typeof i[1]?parseInt(i[1],10):-1},r=function(){return"undefined"!=typeof window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch?!0:!1},a=function(){return window.navigator&&window.navigator.userAgent?window.navigator.userAgent:null},l=function(e,t){var i=!1,n=-1,r=[i,n];if(!t)return r;var a=/windows\s+phone/i;if(a.test(e)){i=!0;var l=/windows\s+phone\s+(\d+)\./i;r=[i,s(l,e)]}return r},o=function(e,t,i){var n=!1,r=-1,a=[n,r];if(t[0]||!i)return a;var l=/(ipad|iphone|ipod)/i;if(l.test(e)){n=!0;var o=/os\s+(\d+)_/i;a=[n,s(o,e)]}return a},h=function(e,t,i,n){var r=!1,a=-1,l=[r,a];if(t[0]||i[0]||!n)return l;var o=/android/i;if(o.test(e)){r=!0;var h=/android\s+(\d+)\./i;a=s(h,e),l=[r,a]}return l},c=function(){try{return"undefined"!=typeof n.testVideo.canPlayType?!0:!1}catch(e){return!1}};n.video5=c();var d=function(e){if(e){var t=n.testVideo.canPlayType('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');if(""!==t)return!0}return!1};n.okMp4=d(n.video5);var u=function(e){if(e){var t=n.testVideo.canPlayType('video/webm; codecs="vp8,vorbis"');if(""!==t)return!0}return!1};n.okWebM=u(n.video5);var p=function(e,t){if(e&&t){var i=n.testVideo.canPlayType("application/vnd.apple.mpegurl"),s=n.testVideo.canPlayType("application/x-mpegurl");if(""!==i||""!==s)return!0}return!1};n.okHls=p(n.video5,n.okMp4);var v=function(){var e=document.documentElement;return!e||"undefined"==typeof e.requestFullscreen&&"undefined"==typeof e.webkitRequestFullscreen&&"undefined"==typeof e.mozRequestFullScreen&&"undefined"==typeof e.msRequestFullscreen&&"undefined"==typeof n.testVideo.webkitEnterFullscreen?!1:!0};n.hasNativeFullscreenSupport=v(),n.requestFullscreen=function(e,t){e&&t&&("undefined"!=typeof e.requestFullscreen?e.requestFullscreen():"undefined"!=typeof e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):"undefined"!=typeof e.mozRequestFullScreen?e.mozRequestFullScreen():"undefined"!=typeof e.msRequestFullscreen?e.msRequestFullscreen():t&&"undefined"!=typeof t.webkitEnterFullscreen&&t.webkitEnterFullscreen())},n.exitFullscreen=function(e){"undefined"!=typeof document.exitFullscreen?document.exitFullscreen():"undefined"!=typeof document.webkitExitFullscreen?document.webkitExitFullscreen():"undefined"!=typeof document.mozCancelFullScreen?document.mozCancelFullScreen():"undefined"!=typeof document.msExitFullscreen?document.msExitFullscreen():e&&"undefined"!=typeof e.webkitExitFullscreen&&e.webkitExitFullscreen()},n.ua=a(),n.hasTouchEvents=r(),n.isWindowsPhone=l(n.ua,n.hasTouchEvents),n.isIos=o(n.ua,n.isWindowsPhone,n.hasTouchEvents),n.isAndroid=h(n.ua,n.isWindowsPhone,n.isIos,n.hasTouchEvents),n.isMobile=!1,(n.isIos[0]||n.isAndroid[0]||n.isWindowsPhone[0])&&(n.isMobile=!0),i.ENV=n},{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FWVAST=void 0;var n=e("./fw"),s={};s.hasDOMParser=function(){return"undefined"!=typeof window.DOMParser?!0:!1},s.vastReadableTime=function(e){if(n.FW.isNumber(e)){var t=0,i=0,s=0,r=Math.floor(e%1e3);return r=0===r?"000":10>r?"00"+r:100>r?"0"+r:r.toString(),t=Math.floor(1*e/1e3),t>59&&(i=Math.floor(1*t/60),t-=60*i),t=0===t?"00":10>t?"0"+t:t.toString(),i>59&&(s=Math.floor(1*i/60),i-=60*s),i=0===i?"00":10>i?"0"+i:i.toString(),s=0===s?"00":10>s?"0"+s:s>23?"00":s.toString(),s+":"+i+":"+t+"."+r}return"00:00:00.000"},s.generateCacheBusting=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;8>i;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},s.getNodeValue=function(e,t){for(var i=e.childNodes,n="",s=0,r=i.length;r>s;s++)i[s]&&i[s].textContent&&(n+=i[s].textContent.trim());if(n){var a=/^<!\[CDATA\[.*\]\]>$/i;if(a.test(n)&&(n=n.replace("<![CDATA[","").replace("]]>","")),!t)return n;var l=/^(https?:)?\/\//i;if(l.test(n))return n}return null},s.RFC3986EncodeURIComponent=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})},s.isValidOffset=function(e){var t=/^\d+:\d+:\d+(\.\d+)?$/i,i=/^\d+%$/i;return t.test(e)||i.test(e)?!0:!1},s.convertOffsetToSeconds=function(e,t){var i=/^\d+:\d+:\d+(\.\d+)?$/i,n=/^\d+%$/i,s=0;if(i.test(e)){var r=e.split(".");r=r[0];var a=r.split(":");s=60*parseInt(a[0])*60+60*parseInt(a[1])+parseInt(a[2])}else if(n.test(e)&&t>0){var l=e.split("%");l=parseInt(l[0]),s=Math.round(t*l/100)}return s},s.dispatchPingEvent=function(e){if(e){var t=void 0;this.adIsLinear&&this.vastPlayer?t=this.vastPlayer:!this.adIsLinear&&this.nonLinearCreative&&(t=this.nonLinearCreative),t&&(Array.isArray(e)?e.forEach(function(e){n.FW.createStdEvent(e,t)}):n.FW.createStdEvent(e,t))}},s.logPerformance=function(e){if(window.performance&&"function"==typeof window.performance.now){var t="";e&&(t+=e),n.FW.log(t+" - "+Math.round(window.performance.now())+" ms")}},i.FWVAST=s},{"./fw":8}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={};n.isNumber=function(e){return"number"==typeof e&&isFinite(e)?!0:!1},n.addClass=function(e,t){e&&"string"==typeof t&&(e.className?-1===e.className.indexOf(t)&&(e.className=(e.className+" "+t).replace(/\s\s+/g," ")):e.className=t)},n.removeClass=function(e,t){e&&"string"==typeof t&&e.className.indexOf(t)>-1&&(e.className=e.className.replace(t,"").replace(/\s\s+/g," "))},n.hasClass=function(e,t){return e&&"string"==typeof e.className&&"string"==typeof t?e.className.indexOf(t)>-1?!0:!1:void 0},n.createStdEvent=function(e,t){var i=void 0;if(t)if("function"==typeof window.Event)try{i=new Event(e),t.dispatchEvent(i)}catch(e){n.trace(e)}else try{i=document.createEvent("Event"),i.initEvent(e,!0,!0),t.dispatchEvent(i)}catch(e){n.trace(e)}},n.getStyleAttributeData=function(e,t){var i=n.getComputedStyle(e,t)||0;return i=i.toString(),i.indexOf("px")>-1&&(i=i.replace("px","")),parseFloat(i)},n.getWidth=function(e){return e?"number"==typeof e.offsetWidth&&0!==e.offsetWidth?e.offsetWidth:n.getStyleAttributeData(e,"width"):0},n.getHeight=function(e){return e?"number"==typeof e.offsetHeight&&0!==e.offsetHeight?e.offsetHeight:n.getStyleAttributeData(e,"height"):0},n.getComputedStyle=function(e,t){var i="";return e&&(i=window.getComputedStyle(e,null).getPropertyValue(t),i=i.toString().toLowerCase()),i},n.show=function(e){e&&(e.style.display="block")},n.hide=function(e){e&&(e.style.display="none")},n.isEmptyObject=function(e){return 0===Object.keys(e).length&&e.constructor===Object?!0:!1},n.ajax=function(e,t,i,s){return new Promise(function(r,a){if(window.XMLHttpRequest){var l=new XMLHttpRequest;l.open("GET",e,!0),l.timeout=t,s&&(l.withCredentials=!0),l.onloadend=function(){"number"==typeof l.status&&l.status>=200&&l.status<300&&"string"==typeof l.responseText&&""!==l.responseText?i?r(l.responseText):r():a()},l.ontimeout=function(){n.log("RMP: XMLHttpRequest timeout"),a()},l.send(null)}else a()})},n.log=function(e){e&&window.console&&"function"==typeof window.console.log&&window.console.log(e)},n.trace=function(e){e&&window.console&&"function"==typeof window.console.trace&&window.console.trace(e)},n.removeIndexFromArray=function(e,t){var i=e,n=t;n.sort(function(e,t){return t-e});for(var s=0;s<n.length;s++)i.splice(n[s],1);return i},n.playPromise=function(e){if(e){var t=e.play();void 0!==t&&t.then(function(){}).catch(function(e){})}},i.FW=n},{}],9:[function(e){"use strict";var t=e("./fw/fw"),i=e("./fw/env"),n=e("./fw/fw-vast"),s=e("./tracking/ping"),r=e("./creatives/linear"),a=e("./creatives/non-linear"),l=e("./tracking/tracking-events"),o=e("./api/api"),h=e("./players/content-player"),c=e("./utils/reset"),d=e("./utils/vast-errors");window.DEBUG=!0,window.RmpVast=function(e,n){if("string"!=typeof e||""===e)return void t.FW.log("RMP-VAST: invalid id to create new instance - exit");this.id=e,this.container=document.getElementById(this.id),this.content=this.container.getElementsByClassName("rmp-content")[0],this.contentPlayer=this.container.getElementsByClassName("rmp-video")[0],this.adContainer=null,this.isInFullscreen=!1,this.vastPlayerInitialized=!1,this.useContentPlayerForAds=!1,i.ENV.isIos[0]&&(this.useContentPlayerForAds=!0);var s={ajaxTimeout:1e4,ajaxWithCredentials:!0,playsInline:!0,debugLevel:1,maxNumRedirects:4,skipMessage:"Skip ad",skipWaitingMessage:"Skip ad in",textForClickUIOnMobile:"Learn more"};this.params=s,n&&!t.FW.isEmptyObject(n)&&(t.FW.isNumber(n.ajaxTimeout)&&n.ajaxTimeout>0&&(this.params.ajaxTimeout=n.ajaxTimeout),"boolean"==typeof n.ajaxWithCredentials&&(this.params.ajaxWithCredentials=n.ajaxWithCredentials),"boolean"==typeof n.playsInline&&(this.params.playsInline=n.playsInline),t.FW.isNumber(n.debugLevel)&&2===n.debugLevel&&(this.params.debugLevel=n.debugLevel),t.FW.isNumber(n.maxNumRedirects)&&n.maxNumRedirects>0&&4!==n.maxNumRedirects&&(this.params.maxNumRedirects=n.maxNumRedirects),"string"==typeof n.skipMessage&&(this.params.skipMessage=n.skipMessage),"string"==typeof n.skipWaitingMessage&&(this.params.skipWaitingMessage=n.skipWaitingMessage),"string"==typeof n.textForClickUIOnMobile&&(this.params.textForClickUIOnMobile=n.textForClickUIOnMobile)),c.RESET.internalVariables.call(this)};for(var u=Object.keys(o.API),p=0,v=u.length;v>p;p++){var g=u[p];window.RmpVast.prototype[g]=o.API[g]}var f=function(){o.API.createEvent.call(this,"adfollowingredirect");var e=n.FWVAST.getNodeValue(this.vastAdTagURI[0],!0);null!==e?this.params.maxNumRedirects>this.redirectsFollowed?(this.redirectsFollowed++,this.loadAds(e)):(s.PING.error.call(this,302,this.inlineOrWrapperErrorTags),d.VASTERRORS.process.call(this,302)):(s.PING.error.call(this,300,this.inlineOrWrapperErrorTags),d.VASTERRORS.process.call(this,300))},y=function(e){for(var t=0,i=e.length;i>t;t++){var o=e[t],h=o.getElementsByTagName("NonLinearAds"),c=o.getElementsByTagName("Linear");if(1!==h.length&&1!==c.length)return s.PING.error.call(this,101,this.inlineOrWrapperErrorTags),void d.VASTERRORS.process.call(this,101);if(1===h.length){var u=h[0].getElementsByTagName("TrackingEvents");return 1===u.length&&l.TRACKINGEVENTS.filter.call(this,u),this.isWrapper?void f.call(this):void a.NONLINEAR.parse.call(this,h)}if(1===c.length){var p=c[0].getAttribute("skipoffset");if(""!==this.params.skipMessage&&null!==p&&""!==p&&n.FWVAST.isValidOffset(p)&&(this.isSkippableAd=!0,this.skipoffset=p,this.useContentPlayerForAds))return s.PING.error.call(this,200,this.inlineOrWrapperErrorTags),void d.VASTERRORS.process.call(this,200);var v=c[0].getElementsByTagName("TrackingEvents");1===v.length&&l.TRACKINGEVENTS.filter.call(this,v);var g=c[0].getElementsByTagName("VideoClicks");if(1===g.length){var y=g[0].getElementsByTagName("ClickThrough"),m=g[0].getElementsByTagName("ClickTracking");if(1===y.length&&(this.clickThroughUrl=n.FWVAST.getNodeValue(y[0],!0)),m.length>0)for(var E=0,P=m.length;P>E;E++){var T=n.FWVAST.getNodeValue(m[E],!0);null!==T&&this.trackingTags.push({event:"clickthrough",url:T})}}return this.isWrapper?void f.call(this):void r.LINEAR.parse.call(this,c)}}},m=function(e){if(this.vastDocument=e.getElementsByTagName("VAST"),1!==this.vastDocument.length)return void d.VASTERRORS.process.call(this,100);var t=this.vastDocument[0].getElementsByTagName("Error");if(1===t.length){var i=n.FWVAST.getNodeValue(t[0],!0);null!==i&&this.vastErrorTags.push({event:"error",url:i})}var r=/^(2|3)\./i,a=this.vastDocument[0].getAttribute("version");if(!r.test(a))return s.PING.error.call(this,102,this.vastErrorTags),void d.VASTERRORS.process.call(this,102);var l=this.vastDocument[0].getElementsByTagName("Ad");if(0===l.length)return s.PING.error.call(this,303,this.vastErrorTags),void d.VASTERRORS.process.call(this,303);for(var o=void 0,h=[],c=0,u=l.length;u>c;c++){var p=l[c].getAttribute("sequence");""!==p&&null!==p||o?h.push(l[c]):o=l[c]}if(!o){for(var v=0,g=h.length;g>v;v++){var m=h[v].getElementsByTagName("InLine"),E=h[v].getElementsByTagName("Wrapper");(1===m.length||1===E.length)&&s.PING.error.call(this,200,this.vastErrorTags)}return void d.VASTERRORS.process.call(this,200)}var P=o.getElementsByTagName("InLine"),T=o.getElementsByTagName("Wrapper");if(1!==P.length&&1!==T.length)return s.PING.error.call(this,101,this.vastErrorTags),void d.VASTERRORS.process.call(this,101);var A=void 0;1===T.length?(this.isWrapper=!0,A=T,this.vastAdTagURI=A[0].getElementsByTagName("VASTAdTagURI")):A=P;var S=A[0].getElementsByTagName("AdSystem"),C=A[0].getElementsByTagName("Impression");if(t=A[0].getElementsByTagName("Error"),1===t.length){var k=n.FWVAST.getNodeValue(t[0],!0);null!==k&&this.inlineOrWrapperErrorTags.push({event:"error",url:k})}var N=A[0].getElementsByTagName("AdTitle"),w=A[0].getElementsByTagName("Description"),L=A[0].getElementsByTagName("Creatives");if(this.isWrapper){if(1!==S.length||1!==this.vastAdTagURI.length||1!==C.length)return s.PING.error.call(this,101,this.inlineOrWrapperErrorTags),void d.VASTERRORS.process.call(this,101)}else if(1!==S.length||1!==N.length||1!==C.length||L.length<1)return s.PING.error.call(this,101,this.inlineOrWrapperErrorTags),void d.VASTERRORS.process.call(this,101);var R=void 0;if(1===L.length&&(R=L[0].getElementsByTagName("Creative"),!this.isWrapper&&R.length<1))return s.PING.error.call(this,101,this.inlineOrWrapperErrorTags),void d.VASTERRORS.process.call(this,101);this.adSystem=n.FWVAST.getNodeValue(S[0],!1);var F=n.FWVAST.getNodeValue(C[0],!0);return null!==F&&this.trackingTags.push({event:"impression",url:F}),this.isWrapper||(this.adTitle=n.FWVAST.getNodeValue(N[0],!1),this.adDescription=n.FWVAST.getNodeValue(w[0],!1)),this.isWrapper&&!R?void f.call(this):void y.call(this,R)};RmpVast.prototype.loadAds=function(e){var i=this;if("string"!=typeof e||""===e)return void d.VASTERRORS.process.call(this,1001);if(!n.FWVAST.hasDOMParser())return void d.VASTERRORS.process.call(this,1002);var s=h.CONTENTPLAYER.getCurrentTime.call(this);if(200>s&&h.CONTENTPLAYER.pause.call(this),this.useContentPlayerForAds){if(this.contentPlayer.currentSrc)this.currentContentSrc=this.contentPlayer.currentSrc;else{if(!this.contentPlayer.src)return void d.VASTERRORS.process.call(this,1003);this.currentContentSrc=this.contentPlayer.src}this.currentContentCurrentTime=s}this.adOnStage&&o.API.stopAds.call(this),
o.API.createEvent.call(this,"adtagstartloading"),this.isWrapper=!1,this.vastAdTagURI=null,this.adTagUrl=e,t.FW.ajax(this.adTagUrl,this.params.ajaxTimeout,!0,this.params.ajaxWithCredentials).then(function(e){o.API.createEvent.call(i,"adtagloaded");var n=void 0;try{var s=new DOMParser;n=s.parseFromString(e,"text/xml")}catch(e){return t.FW.trace(e),void d.VASTERRORS.process.call(i,100)}m.call(i,n)}).catch(function(e){t.FW.trace(e),d.VASTERRORS.process.call(i,1e3)})}},{"./api/api":1,"./creatives/linear":3,"./creatives/non-linear":4,"./fw/env":6,"./fw/fw":8,"./fw/fw-vast":7,"./players/content-player":10,"./tracking/ping":12,"./tracking/tracking-events":13,"./utils/reset":14,"./utils/vast-errors":15}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CONTENTPLAYER=void 0;var n=e("../fw/fw"),s={};s.play=function(){this.contentPlayer.paused&&n.FW.playPromise(this.contentPlayer)},s.pause=function(){this.contentPlayer.paused||this.contentPlayer.pause()},s.setVolume=function(e){this.contentPlayer.volume=e},s.getVolume=function(){return this.contentPlayer.volume},s.getMute=function(){return this.contentPlayer.muted},s.setMute=function(e){e&&!this.contentPlayer.muted?this.contentPlayer.muted=!0:!e&&this.contentPlayer.muted&&(this.contentPlayer.muted=!1)},s.getDuration=function(){var e=this.contentPlayer.duration;return n.FW.isNumber(e)?Math.round(1e3*e):-1},s.getCurrentTime=function(){var e=this.contentPlayer.currentTime;return n.FW.isNumber(e)?Math.round(1e3*e):-1},s.seekTo=function(e){if(n.FW.isNumber(e)&&e>=0){var t=Math.round(e/1e3*100)/100;try{this.contentPlayer.currentTime=t}catch(e){n.FW.trace(e)}}},i.CONTENTPLAYER=s},{"../fw/fw":8}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VASTPLAYER=void 0;var n=e("../fw/fw"),s=e("../fw/fw-vast"),r=e("../fw/env"),a=e("../players/content-player"),l=e("../creatives/icons"),o=e("../utils/reset"),h=e("../tracking/tracking-events"),c=e("../creatives/non-linear"),d=e("../creatives/linear"),u=e("../api/api"),p=e("../utils/vast-errors"),v={},g=function(){this.contentPlayer.removeEventListener("playing",this.onPlayingSeek),a.CONTENTPLAYER.seekTo.call(this,this.currentContentCurrentTime)},f=function(){if(this.icons.length>0&&l.ICONS.destroy.call(this),o.RESET.unwireVastPlayerEvents.call(this),this.clickUIOnMobile&&this.adContainer.removeChild(this.clickUIOnMobile),n.FW.hide(this.adContainer),this.useContentPlayerForAds)this.currentContentCurrentTime>200&&(this.onPlayingSeek=g.bind(this),this.contentPlayer.addEventListener("playing",this.onPlayingSeek)),this.contentPlayer.src=this.currentContentSrc,this.contentPlayer.load();else{this.vastPlayer.pause(),n.FW.hide(this.vastPlayer);try{this.vastPlayer&&this.vastPlayerSource&&this.vastPlayerSource.hasAttribute("src")&&(this.vastPlayerSource.removeAttribute("src"),this.vastPlayer.load()),this.nonLinearCreative&&this.adContainer.removeChild(this.nonLinearCreative)}catch(e){n.FW.trace(e)}}o.RESET.internalVariables.call(this),u.API.createEvent.call(this,"addestroyed")};v.init=function(){this.adContainer||(this.adContainer=document.createElement("div"),this.adContainer.className="rmp-ad-container",this.content.appendChild(this.adContainer)),n.FW.hide(this.adContainer),this.useContentPlayerForAds?this.vastPlayer=this.contentPlayer:(this.vastPlayer=document.createElement("video"),this.vastPlayer.className="rmp-ad-vast-video-player",r.ENV.isMobile||(this.vastPlayer.style.cursor="pointer"),n.FW.hide(this.vastPlayer),this.vastPlayer.controls=!1,this.contentPlayer.muted&&(this.vastPlayer.muted=!0),this.vastPlayer.setAttribute("x-webkit-airplay","allow"),this.params.playsInline&&("boolean"==typeof this.vastPlayer.playsInline?this.vastPlayer.setAttribute("playsinline",!0):this.vastPlayer.setAttribute("webkit-playsinline",!0)),this.vastPlayer.preload="auto",this.vastPlayer.defaultPlaybackRate=1,r.ENV.isMobile&&(n.FW.playPromise(this.vastPlayer),this.vastPlayer.pause())),this.vastPlayerInitialized=!0},v.append=function(e,t){if(this.vastPlayerInitialized||v.init.call(this),!this.vastPlayer)if(this.useContentPlayerForAds)this.vastPlayer=this.contentPlayer;else{var i=this.adContainer.getElementsByClassName("rmp-ad-vast-video-player")[0];if(!i)return void p.VASTERRORS.process.call(this,1004);this.vastPlayer=i}this.adIsLinear?e&&t&&d.LINEAR.update.call(this,e,t):c.NONLINEAR.update.call(this),h.TRACKINGEVENTS.wire.call(this),!this.useContentPlayerForAds&&this.icons.length>0&&l.ICONS.append.call(this)},v.setVolume=function(e){this.vastPlayer.volume=e},v.getVolume=function(){return this.vastPlayer.volume},v.setMute=function(e){e&&!this.vastPlayer.muted?(this.vastPlayer.muted=!0,s.FWVAST.dispatchPingEvent.call(this,"mute")):!e&&this.vastPlayer.muted&&(this.vastPlayer.muted=!1,s.FWVAST.dispatchPingEvent.call(this,"unmute"))},v.getMute=function(){return this.vastPlayer.muted},v.play=function(){this.vastPlayer.paused&&n.FW.playPromise(this.vastPlayer)},v.pause=function(){this.vastPlayer.paused||this.vastPlayer.pause()},v.getDuration=function(){var e=this.vastPlayer.duration;return n.FW.isNumber(e)?Math.round(1e3*e):-1},v.getCurrentTime=function(){var e=this.vastPlayer.currentTime;return n.FW.isNumber(e)?Math.round(1e3*e):-1};var y=function(){this.vastPlayer&&this.vastPlayer.removeEventListener("reset",this.onReset),f.call(this),a.CONTENTPLAYER.play.call(this)};v.resumeContent=function(){this.onReset=y.bind(this),this.readyForReset?this.onReset():this.vastPlayer.addEventListener("reset",this.onReset)},i.VASTPLAYER=v},{"../api/api":1,"../creatives/icons":2,"../creatives/linear":3,"../creatives/non-linear":4,"../fw/env":6,"../fw/fw":8,"../fw/fw-vast":7,"../players/content-player":10,"../tracking/tracking-events":13,"../utils/reset":14,"../utils/vast-errors":15}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PING=void 0;var n=(e("../fw/fw"),e("../fw/fw-vast")),s=e("../players/content-player"),r={};r.events=["impression","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","fullscreen","exitFullscreen","skip","progress","clickthrough"];var a=function(e,t,i){var r=/\[CACHEBUSTING\]/gi,a=e;r.test(a)&&(a=a.replace(r,n.FWVAST.generateCacheBusting()));var l=/\[ERRORCODE\]/gi;l.test(a)&&"number"==typeof t&&t>0&&1e3>t&&(a=a.replace(l,t));var o=/\[CONTENTPLAYHEAD\]/gi,h=s.CONTENTPLAYER.getCurrentTime.call(this);o.test(a)&&h>-1&&(h=n.FWVAST.vastReadableTime(h),a=a.replace(o,n.FWVAST.RFC3986EncodeURIComponent(h)));var c=/\[ASSETURI\]/gi;return c.test(a)&&"string"==typeof i&&""!==i&&(a=a.replace(c,n.FWVAST.RFC3986EncodeURIComponent(i))),a},l=function(e,t,i){var n=new Image;n.addEventListener("load",function(){n=null}),n.addEventListener("error",function(){n=null}),n.src=e};r.tracking=function(e,t){var i=a.call(this,e,null,t);l(i,this.params.debugLevel)},r.error=function(e,t){if(t&&t.length>0)for(var i=0,n=t.length;n>i;i++){var s=a.call(this,t[i].url,e,null);l(s,this.params.debugLevel)}},i.PING=r},{"../fw/fw":8,"../fw/fw-vast":7,"../players/content-player":10}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TRACKINGEVENTS=void 0;var n=e("../fw/fw"),s=e("../fw/fw-vast"),r=e("../fw/env"),a=e("./ping"),l=e("../api/api"),o=e("../players/vast-player"),h={},c=function(e){var t=this;e.forEach(function(e){a.PING.tracking.call(t,e.url,t.adMediaUrl)})},d=function(e){var t=this;if(e&&e.type){var i=this.trackingTags.filter(function(t){return e.type===t.event});i.length>0&&(this.vastPlayer&&"pause"===e.type?(clearTimeout(this.adPauseEventTimeout),this.adPauseEventTimeout=setTimeout(function(){c.call(t,i)},200)):c.call(this,i)),!this.vastPlayer||"complete"!==e.type&&"skip"!==e.type||(clearTimeout(this.adPauseEventTimeout),this.readyForReset=!0,s.FWVAST.dispatchPingEvent.call(this,"reset"))}},u=function(){this.vastPlayer.muted||0===this.vastPlayer.volume?(l.API.createEvent.call(this,"advolumemuted"),s.FWVAST.dispatchPingEvent.call(this,"mute"),this.vastPlayerMuted=!0):this.vastPlayerMuted&&(s.FWVAST.dispatchPingEvent.call(this,"unmute"),this.vastPlayerMuted=!1),l.API.createEvent.call(this,"advolumechanged")},p=function(){var e=this;this.vastPlayerCurrentTime=o.VASTPLAYER.getCurrentTime.call(this),this.vastPlayerCurrentTime>0&&(this.vastPlayerDuration>0&&this.vastPlayerDuration>this.vastPlayerCurrentTime&&(this.vastPlayerCurrentTime>=.25*this.vastPlayerDuration&&!this.firstQuartileEventFired?(this.firstQuartileEventFired=!0,l.API.createEvent.call(this,"adfirstquartile"),s.FWVAST.dispatchPingEvent.call(this,"firstQuartile")):this.vastPlayerCurrentTime>=.5*this.vastPlayerDuration&&!this.midpointEventFired?(this.midpointEventFired=!0,l.API.createEvent.call(this,"admidpoint"),s.FWVAST.dispatchPingEvent.call(this,"midpoint")):this.vastPlayerCurrentTime>=.75*this.vastPlayerDuration&&!this.thirdQuartileEventFired&&(this.thirdQuartileEventFired=!0,l.API.createEvent.call(this,"adthirdquartile"),s.FWVAST.dispatchPingEvent.call(this,"thirdQuartile"))),this.isSkippableAd&&(null===this.progressEventOffsetsSeconds&&(this.progressEventOffsetsSeconds=[],this.progressEventOffsets.forEach(function(t){e.progressEventOffsetsSeconds.push({offsetSeconds:s.FWVAST.convertOffsetToSeconds(t,e.vastPlayerDuration),offsetRaw:t})}),this.progressEventOffsetsSeconds.sort(function(e,t){return e.offsetSeconds-t.offsetSeconds})),Array.isArray(this.progressEventOffsetsSeconds)&&this.progressEventOffsetsSeconds.length>0&&this.vastPlayerCurrentTime>=this.progressEventOffsetsSeconds[0].offsetSeconds&&(s.FWVAST.dispatchPingEvent.call(this,"progress-"+this.progressEventOffsetsSeconds[0].offsetRaw),this.progressEventOffsetsSeconds.shift())))},v=function(){if(!this.vastPlayerPaused){this.vastPlayerPaused=!0,l.API.createEvent.call(this,"adpaused");for(var e=0,t=this.trackingTags.length;t>e;e++)if("pause"===this.trackingTags[e].event)return;s.FWVAST.dispatchPingEvent.call(this,"pause")}},g=function(){this.vastPlayerPaused&&(this.vastPlayerPaused=!1,l.API.createEvent.call(this,"adresumed"),s.FWVAST.dispatchPingEvent.call(this,"resume"))},f=function(){this.vastPlayer.removeEventListener("playing",this.onPlaying),l.API.createEvent.call(this,"adimpression"),l.API.createEvent.call(this,"adstarted"),s.FWVAST.dispatchPingEvent.call(this,["impression","creativeView","start"])},y=function(){this.vastPlayer.removeEventListener("ended",this.onEnded),l.API.createEvent.call(this,"adcomplete"),s.FWVAST.dispatchPingEvent.call(this,"complete")},m=function(e){e&&e.type&&("fullscreenchange"===e.type?this.isInFullscreen?(this.isInFullscreen=!1,n.FW.removeClass(this.container,"rmp-fullscreen-on"),this.adOnStage&&this.adIsLinear&&s.FWVAST.dispatchPingEvent.call(this,"exitFullscreen")):(this.isInFullscreen=!0,n.FW.addClass(this.container,"rmp-fullscreen-on"),this.adOnStage&&this.adIsLinear&&s.FWVAST.dispatchPingEvent.call(this,"fullscreen")):"webkitbeginfullscreen"===e.type?(this.isInFullscreen=!0,this.adOnStage&&this.adIsLinear&&s.FWVAST.dispatchPingEvent.call(this,"fullscreen")):"webkitendfullscreen"===e.type&&(this.isInFullscreen=!1,this.adOnStage&&this.adIsLinear&&s.FWVAST.dispatchPingEvent.call(this,"exitFullscreen")))};h.wire=function(){this.vastPlayer&&(this.onPause=v.bind(this),this.vastPlayer.addEventListener("pause",this.onPause),this.onPlay=g.bind(this),this.vastPlayer.addEventListener("play",this.onPlay),this.onPlaying=f.bind(this),this.vastPlayer.addEventListener("playing",this.onPlaying),this.onEnded=y.bind(this),this.vastPlayer.addEventListener("ended",this.onEnded),this.onVolumeChange=u.bind(this),this.vastPlayer.addEventListener("volumechange",this.onVolumeChange),this.onTimeupdate=p.bind(this),this.vastPlayer.addEventListener("timeupdate",this.onTimeupdate),r.ENV.hasNativeFullscreenSupport&&(this.onFullscreenchange=m.bind(this),document.addEventListener("fullscreenchange",this.onFullscreenchange),this.useContentPlayerForAds&&(this.vastPlayer.addEventListener("webkitbeginfullscreen",this.onFullscreenchange),this.vastPlayer.addEventListener("webkitendfullscreen",this.onFullscreenchange)))),this.onEventPingTracking=d.bind(this);for(var e=0,t=this.trackingTags.length;t>e;e++)this.vastPlayer?this.vastPlayer.addEventListener(this.trackingTags[e].event,this.onEventPingTracking):this.nonLinearCreative&&this.nonLinearCreative.addEventListener(this.trackingTags[e].event,this.onEventPingTracking)},h.filter=function(e){for(var t=e[0].getElementsByTagName("Tracking"),i=0,n=t.length;n>i;i++){var r=t[i].getAttribute("event"),l=s.FWVAST.getNodeValue(t[i],!0);if(null!==r&&""!==r&&a.PING.events.indexOf(r)>-1&&null!==l){if("progress"===r){var o=t[i].getAttribute("offset");if(null===o||""===o||!s.FWVAST.isValidOffset(o))continue;this.progressEventOffsets.push(o),r=r+"-"+o}this.trackingTags.push({event:r,url:l})}}},i.TRACKINGEVENTS=h},{"../api/api":1,"../fw/env":6,"../fw/fw":8,"../fw/fw-vast":7,"../players/vast-player":11,"./ping":12}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.RESET=void 0;var n=e("../fw/env"),s=(e("../fw/fw"),{});s.internalVariables=function(){this.onLoadedmetadataPlay=null,this.onEndedResumeContent=null,this.onPlaybackError=null,this.onReset=null,this.onPause=null,this.onPlay=null,this.onPlaying=null,this.onEnded=null,this.onVolumeChange=null,this.onTimeupdate=null,this.onEventPingTracking=null,this.onClickThrough=null,this.onPlayingAppendIcons=null,this.onTimeupdateCheckSkip=null,this.onClickSkip=null,this.onNonLinearLoadSuccess=null,this.onNonLinearLoadError=null,this.onNonLinearClickThrough=null,this.onFullscreenchange=null,this.onPlayingSeek=null,this.adTagUrl=null,this.vastPlayer=null,this.vastPlayerSource=null,this.vastDocument=null,this.trackingTags=[],this.vastErrorTags=[],this.inlineOrWrapperErrorTags=[],this.adMediaUrl=null,this.adMediaHeight=null,this.adMediaWidth=null,this.vastPlayerMuted=!1,this.vastPlayerDuration=-1,this.vastPlayerCurrentTime=-1,this.firstQuartileEventFired=!1,this.midpointEventFired=!1,this.thirdQuartileEventFired=!1,this.vastPlayerPaused=!1,this.readyForReset=!1,this.vastErrorCode=-1,this.vastErrorMessage="Error getting VAST error",this.adSystem=null,this.adIsLinear=null,this.adContentType=null,this.adTitle=null,this.adDescription=null,this.adOnStage=!1,this.adPauseEventTimeout=null,this.clickThroughUrl=null,this.isWrapper=!1,this.vastAdTagURI=null,this.redirectsFollowed=0,this.icons=[],this.clickUIOnMobile=null,this.currentContentSrc=null,this.currentContentCurrentTime=-1,this.isSkippableAd=!1,this.skipoffset="",this.progressEventOffsets=[],this.progressEventOffsetsSeconds=null,this.skipButton=null,this.skipWaiting=null,this.skipMessage=null,this.skipButton=null,this.skippableAdCanBeSkipped=!1,this.nonLinearCreative=null,this.nonLinearCreativeUrl=null,this.nonLinearCreativeHeight=0,this.nonLinearCreativeWidth=0},s.unwireVastPlayerEvents=function(){if(this.nonLinearCreative){this.nonLinearCreative.removeEventListener("load",this.onNonLinearLoadSuccess),this.nonLinearCreative.removeEventListener("error",this.onNonLinearLoadError),this.nonLinearCreative.removeEventListener("click",this.onNonLinearClickThrough);for(var e=0,t=this.trackingTags.length;t>e;e++)this.nonLinearCreative.removeEventListener(this.trackingTags[e].event,this.onEventPingTracking)}if(this.vastPlayer){this.vastPlayerSource&&this.vastPlayerSource.removeEventListener("error",this.onPlaybackError),this.vastPlayer.removeEventListener("durationchange",this.onDurationChange),this.vastPlayer.removeEventListener("loadedmetadata",this.onLoadedmetadataPlay),this.vastPlayer.removeEventListener("ended",this.onEndedResumeContent),this.vastPlayer.removeEventListener("pause",this.onPause),this.vastPlayer.removeEventListener("play",this.onPlay),this.vastPlayer.removeEventListener("playing",this.onPlaying),this.vastPlayer.removeEventListener("ended",this.onEnded),this.vastPlayer.removeEventListener("volumechange",this.onVolumeChange),this.vastPlayer.removeEventListener("timeupdate",this.onTimeupdate);for(var i=0,s=this.trackingTags.length;s>i;i++)this.vastPlayer.removeEventListener(this.trackingTags[i].event,this.onEventPingTracking);this.vastPlayer.removeEventListener("click",this.onClickThrough),this.vastPlayer.removeEventListener("playing",this.onPlayingAppendIcons),this.vastPlayer.removeEventListener("timeupdate",this.onTimeupdateCheckSkip),this.skipButton&&this.skipButton.removeEventListener("click",this.onClickSkip),this.clickUIOnMobile&&this.clickUIOnMobile.addEventListener("touchend",this.onClickThrough),n.ENV.hasNativeFullscreenSupport&&(document.removeEventListener("fullscreenchange",this.onFullscreenchange),this.useContentPlayerForAds&&(this.vastPlayer.removeEventListener("webkitbeginfullscreen",this.onFullscreenchange),this.vastPlayer.removeEventListener("webkitendfullscreen",this.onFullscreenchange)))}},i.RESET=s},{"../fw/env":6,"../fw/fw":8}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VASTERRORS=void 0;var n=(e("../fw/fw"),e("../api/api")),s=e("../players/vast-player"),r={};r.list=[{code:100,description:"XML parsing error."},{code:101,description:"VAST schema validation error."},{code:102,description:"VAST version of response not supported."},{code:200,description:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display."},{code:201,description:"Video player expecting different linearity."},{code:202,description:"Video player expecting different duration."},{code:203,description:"Video player expecting different size."},{code:300,description:"General Wrapper error."},{code:301,description:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the video player.)"},{code:302,description:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response."},{code:303,description:"No Ads VAST response after one or more Wrappers."},{code:400,description:"General Linear error. Video player is unable to display the Linear Ad."},{code:401,description:"File not found. Unable to find Linear/MediaFile from URI."},{code:402,description:"Timeout of MediaFile URI."},{code:403,description:"Couldn't find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},{code:405,description:"Problem displaying MediaFile. Video player found a MediaFile with supported type but couldn't display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},{code:500,description:"General NonLinearAds error."},{code:501,description:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},{code:502,description:"Unable to fetch NonLinearAds/NonLinear resource."},{code:503,description:"Couldn't find NonLinear resource with supported type."},{code:600,description:"General CompanionAds error."},{code:601,description:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)."},{code:602,description:"Unable to display Required Companion."},{code:603,description:"Unable to fetch CompanionAds/Companion resource."},{code:604,description:"Couldn't find Companion resource with supported type."},{code:900,description:"Undefined Error."},{code:901,description:"General VPAID error."},{code:1e3,description:"Error processing AJAX call to retrieve adTag"},{code:1001,description:"Invalid input for loadAds method"},{code:1002,description:"Required DOMParser API is not available"},{code:1003,description:"Could not get source for content player"},{code:1004,description:"Could not find vast player in DOM"}];var a=function(e){var t=r.list.filter(function(t){return t.code===e});1===t.length?(this.vastErrorCode=t[0].code,this.vastErrorMessage=t[0].description):(this.vastErrorCode=-1,this.vastErrorMessage="Error getting VAST error")};r.process=function(e){this.readyForReset=!0,a.call(this,e),n.API.createEvent.call(this,"aderror"),s.VASTPLAYER.resumeContent.call(this)},i.VASTERRORS=r},{"../api/api":1,"../fw/fw":8,"../players/vast-player":11}]},{},[9]);